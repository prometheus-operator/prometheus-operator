---
weight: 215
toc: true
title: Restricted/Baseline Namespaces
menu:
    docs:
        parent: operator
lead: ""
images: []
draft: false
description: Deploying prometheus, alertmanager and thanos ruler in restricted or baseline namesapace.
---

This document describes how to deploy prometheus, alertmanager and thanos ruler in restricted namespace or baseline namespace without getting error.

## How does it works

The `Prometheus`, `Alertmanager`, and `ThanosRuler` CRDs expose a
`spec.containers.securityContext` field which allows to:

* Override or inject securityContext fields for the containers generated by the operator.

## Deploying Prometheus In Restricted Or Baseline Namespace

```yaml
apiVersion: monitoring.coreos.com/v1
kind: Prometheus
metadata:
  name: prometheus
spec: 
  containers:
    - name: prometheus
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 1000
        seccompProfile:
          type: RuntimeDefault
        capabilities:
          drop:
            - ALL
    - name: config-reloader
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 1000
        seccompProfile:
          type: RuntimeDefault
        capabilities:
          drop:
            - ALL
  initContainers:
    - name: init-config-reloader
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 1000
        seccompProfile:
          type: RuntimeDefault
        capabilities:
          drop:
            - ALL
```
